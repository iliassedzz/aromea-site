<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Aromea - Commander</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

  <!-- ===== CHARGEMENT DU HEADER ===== -->
  <div id="header"></div>

  <main class="commande-page">
    <h2>Votre commande</h2>

    <!-- ===== PANIER (rempli dynamiquement) ===== -->
    <section id="panier">
      <h3>Articles sélectionnés :</h3>
      <ul id="liste-articles">
        <!-- Les articles du panier s’affichent ici -->
      </ul>
    </section>

    <!-- ===== FORMULAIRE CLIENT ===== -->
    <section class="formulaire">
      <h3>Vos informations</h3>
      <form id="form-commande">

        <label for="nom">Nom :</label>
        <input type="text" id="nom" name="nom" required>

        <label for="adresse">Adresse :</label>
        <input type="text" id="adresse" name="adresse" required>

        <label for="tel">Téléphone :</label>
        <input type="tel" id="tel" name="tel" required>

        <button type="submit">Valider la commande</button>
      </form>
    </section>
  </main>

  <!-- ===== CHARGEMENT DU FOOTER ===== -->
  <div id="footer"></div>

  <!-- ===== SCRIPTS ===== -->
  <script>
    // Chargement du header et footer
    fetch('header.html').then(res => res.text()).then(data => {
      document.getElementById('header').innerHTML = data;
    });
    fetch('footer.html').then(res => res.text()).then(data => {
      document.getElementById('footer').innerHTML = data;
    });

    // Affichage du panier à partir du localStorage
    const liste = document.getElementById('liste-articles');
    const panier = JSON.parse(localStorage.getItem('panier')) || [];

    if (panier.length === 0) {
      liste.innerHTML = "<li>Votre panier est vide.</li>";
    } else {
      panier.forEach(article => {
        const li = document.createElement('li');
        li.textContent = article;
        liste.appendChild(li);
      });
    }

    // Formulaire - événement de soumission
    document.getElementById('form-commande').addEventListener('submit', function(e) {
      e.preventDefault();

      const nom = document.getElementById('nom').value;
      const adresse = document.getElementById('adresse').value;
      const tel = document.getElementById('tel').value;

      // On affichera ça dans la console pour test (plus tard on enverra dans Firebase)
      console.log("Commande validée !");
      console.log("Nom :", nom);
      console.log("Adresse :", adresse);
      console.log("Téléphone :", tel);
      console.log("Articles :", panier);

      alert("Commande envoyée ! Merci pour votre confiance.");

      // Optionnel : vider le panier
      localStorage.removeItem('panier');
      location.reload();
    });
  </script>

</body>
</html>
